import{u as z,l as F,m as I,n as o,G as A,o as s,p as C,q as v,s as e,S as r,C as R,R as h,t as l,I as c,H as V,v as N,w as B,B as y,x as P,y as M,z as D,A as f,D as _,F as b,J as O,K as L,L as U}from"./index-eca09fbb.js";import{L as $}from"./LotteryCreateModal-249a5255.js";import{c as S,s as J}from"./Loading-f8878a0d.js";import{L as q}from"./logo_jackpot-683e73df.js";import{I as K}from"./information-b6116945.js";import{P as X}from"./index-04eec16a.js";import"./index-21b0c4c0.js";import"./useLocale-ae37c791.js";import"./index-adabb317.js";import"./TextArea-1460df13.js";import"./SearchOutlined-7a5662a3.js";function ce(){const m=z(),H=F(),T=I($),[n,p]=o.useState(new A),[g,k]=o.useState(!0),[E]=o.useState(window.innerHeight),[d,u]=o.useState(null),x=async()=>{s.instance.emit(b.event)},w=async(i,j,t)=>{const a=m.id;if(i!==a)return Promise.resolve();await f.instance.getAddress()===t&&(S(),O("Verify success")),s.instance.emit(b.event)};async function G(){const i=m.id,t=await(await f.instance.getContract(L.LotteryGameSystem)).getGame(i);p(t),t.transactionHash===""?t.getTransactionHash().then(a=>{console.log("哈希值",a),u(a)}):u(t.transactionHash),k(!t.isWaitingReward)}o.useEffect(()=>(s.instance.on(C.event,w),s.instance.on(v.event,x),G(),()=>{s.instance.off(C.event,w),s.instance.off(v.event,x)}),[H.pathname]);const W=async()=>{const i=m.id,t=await(await f.instance.getContract(L.LotteryGameSystem)).getGame(i,!0);if(p(t),t.isWaitingVerify){J();try{await t.verify()}catch{S(),U("Verify failed")}}else T.show()};return e.jsx(e.Fragment,{children:e.jsxs(r,{direction:"vertical",style:{minHeight:`${R}`,width:"100%",display:"flex",justifyContent:"center"},children:[e.jsxs(h,{gutter:0,style:{paddingLeft:65,paddingRight:65},children:[e.jsx(l,{span:12,style:{width:"100%",display:"flex",justifyContent:"center"},children:e.jsxs(r,{direction:"vertical",size:"small",children:[e.jsx(h,{style:{width:"100%"},children:e.jsx(l,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx(c,{src:q,preview:!1,style:{width:465,height:142,display:"flex"}})})}),e.jsx(h,{style:{width:"100%"},children:e.jsxs(l,{span:24,style:{display:"flex",justifyContent:"center",position:"relative"},children:[e.jsxs("p",{style:{fontSize:50,fontFamily:"Arimo Hebrew Subset",fontWeight:"bold",color:"#fcdc36",textAlign:"center"},children:[n.TotalAmount," ",n.tokenSymbol]}),e.jsx("label",{style:{position:"absolute",fontFamily:"Poppins",fontWeight:400,fontSize:26,color:"white",top:60},children:n.totalAmountUSD})]})}),e.jsx(h,{style:{width:"100%"},children:e.jsx(l,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx("p",{style:{fontFamily:"Arimo Hebrew Subset",fontSize:70,fontWeight:700,width:970,height:160,background:"linear-gradient(270deg, #C879F9 0%, #6C7EFC 50%, #74F0B2 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textAlign:"left",marginTop:30,marginLeft:20},children:"Congratulations the winners!"})})})]})}),e.jsx(l,{span:12,style:{width:"100%",position:"relative",display:"flex",justifyContent:"center"},children:e.jsxs("div",{style:{width:669,height:500,marginTop:-100,zIndex:-1},children:[e.jsx(c,{src:V,preview:!1,style:{position:"absolute",width:681,top:100,left:100,transform:"scale(0.83)"}}),e.jsx(c,{src:N,preview:!1,style:{width:554,position:"absolute",top:100,left:150}}),e.jsx(c,{src:B,style:{position:"absolute",width:485.5,top:130,left:200,cursor:"pointer"}})]})})]}),e.jsxs(r,{direction:"vertical",style:{display:"flex",justifyContent:"center",alignContent:"center",height:50,marginTop:E<900?20:100,position:"relative"},children:[e.jsxs(r,{style:{width:"100%",display:"flex",justifyContent:"center",paddingLeft:80},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontFamily:"Arimo Hebrew Subset",fontSize:20,color:"#91a7be",display:"flex",justifyContent:"center",marginBottom:10},children:"Begin crafting your own miracles!"}),e.jsx(y,{onClick:W,className:"start-btn",style:{width:460,height:100,borderRadius:40,fontSize:40,fontWeight:700},children:n.isWaitingVerify&&!g?"Verify and Earn":"Create game"})]}),e.jsx(X,{rootClassName:"rule-popover",content:n.isWaitingVerify&&!g?P:M,title:"Rules",placement:"right",children:e.jsx(y,{style:{width:42,height:42,background:"transparent",border:"none",marginLeft:35,marginTop:26},icon:e.jsx(c,{src:K,preview:!1,style:{width:42,height:42}}),type:"default"})})]}),e.jsx(r,{direction:"horizontal",size:"small",hidden:!d,style:{display:"flex",justifyContent:"center"},children:e.jsxs(y,{type:"text",style:{display:"flex"},target:"_blank",href:`${D(f.instance.chainId)}/tx/${d}`,disabled:!d,children:[e.jsxs("p",{style:{color:"#91a7be",fontSize:30,fontFamily:"Arimo Hebrew Subset",fontWeight:"bold"},children:["TX: ",_(d)]}),e.jsx("svg",{style:{marginTop:2,marginLeft:30,color:"#91a7be",fontSize:40,display:"none"},stroke:"currentColor",fill:"none",strokeWidth:"0",viewBox:"0 0 24 24",focusable:"false",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})})]})]})})}export{ce as default};
