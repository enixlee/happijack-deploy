import{u as R,l as V,m as M,n as o,G as W,o as n,p as L,q as S,s as e,S as r,C as z,R as f,t as l,I as c,H as N,v as P,w as B,B as p,x as D,y as O,z as U,A as m,D as $,F as G,J as K,K as g,L as u,M as T,N as Y}from"./index-ba5e32f3.js";import{L as J}from"./LotteryCreateModal-a750b0dc.js";import{c as H,s as q}from"./Loading-41725850.js";import{L as X}from"./logo_jackpot-683e73df.js";import{P as Q,I as Z}from"./information-64895b74.js";import"./closable-19ea6968.js";import"./index-1b669338.js";import"./TextArea-bacae442.js";import"./SearchOutlined-17753f94.js";import"./index-3a3af3ab.js";import"./useLocale-67617ee1.js";function he(){const y=R(),k=V(),A=M(J),[a,x]=o.useState(new W),[w,_]=o.useState(!0),[s]=o.useState(window.innerHeight),[d,C]=o.useState(null),j=async()=>{n.instance.emit(G.event)},v=async(i,b,t)=>{const h=y.id;if(i!==h)return Promise.resolve();const E=await m.instance.getAddress();E===t&&(H(),K("Verify success"),g.instance.trackGameLogic(u.VERIFY_GAME_SUCCESS,{token_id:i,verifier_address:E})),n.instance.emit(G.event)};async function I(){const i=y.id,t=await(await m.instance.getContract(T.LotteryGameSystem)).getGame(i);x(t),t.transactionHash===""?t.getTransactionHash().then(h=>{C(h)}):C(t.transactionHash),_(!t.isWaitingReward)}o.useEffect(()=>(n.instance.on(L.event,v),n.instance.on(S.event,j),I(),()=>{n.instance.off(L.event,v),n.instance.off(S.event,j)}),[k.pathname]);const F=async()=>{const i=y.id,t=await(await m.instance.getContract(T.LotteryGameSystem)).getGame(i,!0);if(x(t),t.isWaitingVerify){q();try{g.instance.trackGameLogic(u.CLICK_VERIFY_AT_HOMEPAGE),await t.verify()}catch{H(),Y("Verify failed")}}else A.show(),g.instance.trackGameLogic(u.CLICK_CREATE_GAME_AT_HOMEPAGE)};return e.jsx(e.Fragment,{children:e.jsxs(r,{direction:"vertical",style:{minHeight:`${z}`,width:"100%",display:"flex",justifyContent:"center"},children:[e.jsxs(f,{gutter:0,style:{paddingLeft:s<=900?65:165,paddingRight:s<=900?65:165,marginTop:s<=900?-30:0},children:[e.jsx(l,{span:12,style:{width:"100%",display:"flex",justifyContent:"center"},children:e.jsxs(r,{direction:"vertical",size:"small",children:[e.jsx(f,{style:{width:"100%"},children:e.jsx(l,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx(c,{src:X,preview:!1,style:{width:465,height:142,display:"flex"}})})}),e.jsx(f,{style:{width:"100%"},children:e.jsxs(l,{span:24,style:{display:"flex",justifyContent:"center",position:"relative"},children:[e.jsxs("p",{style:{fontSize:50,fontFamily:"Arimo Hebrew Subset",fontWeight:"bold",color:"#fcdc36",textAlign:"center"},children:[a.TotalAmount," ",a.tokenSymbol]}),e.jsx("label",{style:{position:"absolute",fontFamily:"Poppins",fontWeight:400,fontSize:26,color:"white",top:60},children:a.totalAmountUSD})]})}),e.jsx(f,{style:{width:"100%"},children:e.jsx(l,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx("p",{style:{fontFamily:"Arimo Hebrew Subset",fontSize:70,fontWeight:"bold",width:s<=900?670:970,height:160,background:"linear-gradient(270deg, #C879F9 0%, #6C7EFC 50%, #74F0B2 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textAlign:"left",marginTop:s<=900?0:30,marginLeft:20},children:"Congratulations the winners!"})})})]})}),e.jsx(l,{span:12,style:{width:"100%",position:"relative",display:"flex",justifyContent:"center",transform:`scale(${s<=900?.8:1})`},children:e.jsxs("div",{style:{width:669,height:500,marginTop:-100,zIndex:-1},children:[e.jsx(c,{src:N,preview:!1,style:{position:"absolute",width:681,top:100,left:100,transform:"scale(0.83)"}}),e.jsx(c,{src:P,preview:!1,style:{width:554,position:"absolute",top:100,left:150}}),e.jsx(c,{src:B,style:{position:"absolute",width:485.5,top:130,left:200,cursor:"pointer"}})]})})]}),e.jsxs(r,{direction:"vertical",style:{display:"flex",justifyContent:"center",alignContent:"center",height:50,marginTop:s<=900?-66:100,position:"relative",transform:`scale(${s<=900?.8:1})`},children:[e.jsxs(r,{style:{width:"100%",display:"flex",justifyContent:"center",paddingLeft:80},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontFamily:"Arimo Hebrew Subset",fontSize:20,color:"#91a7be",display:"flex",justifyContent:"center",marginBottom:10},children:"Begin crafting your own miracles!"}),e.jsx(p,{onClick:F,className:"start-btn",style:{width:460,height:100,borderRadius:40,fontSize:40,fontWeight:700},children:a.isWaitingVerify&&!w?"Verify and Earn":"Create game"})]}),e.jsx(Q,{rootClassName:"rule-popover",content:a.isWaitingVerify&&!w?D:O,title:"Rules",placement:"right",children:e.jsx(p,{style:{width:42,height:42,background:"transparent",border:"none",marginLeft:35,marginTop:26},icon:e.jsx(c,{src:Z,preview:!1,style:{width:42,height:42}}),type:"default"})})]}),e.jsx(r,{direction:"horizontal",size:"small",hidden:!d,style:{display:"flex",justifyContent:"center"},children:e.jsxs(p,{type:"text",style:{display:"flex"},target:"_blank",href:`${U(m.instance.chainId)}/tx/${d}`,disabled:!d,children:[e.jsxs("p",{style:{color:"#91a7be",fontSize:30,fontFamily:"Arimo Hebrew Subset",fontWeight:"bold"},children:["TX: ",$(d)]}),e.jsx("svg",{style:{marginTop:2,marginLeft:30,color:"#91a7be",fontSize:40,display:"none"},stroke:"currentColor",fill:"none",strokeWidth:"0",viewBox:"0 0 24 24",focusable:"false",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})})]})]})})}export{he as default};
