import{u as R,l as V,m as M,n as r,G as W,o as i,p as L,q as S,s as e,S as l,C as z,R as f,t as c,I as d,H as N,v as P,w as B,B as g,x as D,y as O,z as U,A as m,D as $,F as G,J as K,K as p,L as u,M as T,N as Y}from"./index-ab6d1a13.js";import{L as J}from"./LotteryCreateModal-31148e91.js";import{c as H,s as q}from"./Loading-f31dbf0b.js";import{L as X}from"./logo_jackpot-683e73df.js";import{P as Q,I as Z}from"./information-814f8750.js";import"./index-2ca0a716.js";import"./useLocale-2c326132.js";import"./index-c1014aa0.js";import"./TextArea-7d5c1915.js";import"./SearchOutlined-55394f85.js";function de(){const y=R(),k=V(),A=M(J),[a,x]=r.useState(new W),[w,_]=r.useState(!0),[s]=r.useState(window.innerHeight),[h,C]=r.useState(null),j=async()=>{i.instance.emit(G.event)},v=async(n,b,t)=>{const o=y.id;if(n!==o)return Promise.resolve();const E=await m.instance.getAddress();E===t&&(H(),K("Verify success"),p.instance.trackGameLogic(u.VERIFY_GAME_SUCCESS,{token_id:n,verifier_address:E})),i.instance.emit(G.event)};async function I(){const n=y.id,t=await(await m.instance.getContract(T.LotteryGameSystem)).getGame(n);x(t),t.transactionHash===""?t.getTransactionHash().then(o=>{console.log("哈希值",o),C(o)}):C(t.transactionHash),_(!t.isWaitingReward)}r.useEffect(()=>(i.instance.on(L.event,v),i.instance.on(S.event,j),I(),()=>{i.instance.off(L.event,v),i.instance.off(S.event,j)}),[k.pathname]);const F=async()=>{const n=y.id,t=await(await m.instance.getContract(T.LotteryGameSystem)).getGame(n,!0);if(x(t),t.isWaitingVerify){q();try{p.instance.trackGameLogic(u.CLICK_VERIFY_AT_HOMEPAGE),await t.verify()}catch{H(),Y("Verify failed")}}else A.show(),p.instance.trackGameLogic(u.CLICK_CREATE_GAME_AT_HOMEPAGE)};return e.jsx(e.Fragment,{children:e.jsxs(l,{direction:"vertical",style:{minHeight:`${z}`,width:"100%",display:"flex",justifyContent:"center"},children:[e.jsxs(f,{gutter:0,style:{paddingLeft:s<=900?65:165,paddingRight:s<=900?65:165,marginTop:s<=900?-30:0},children:[e.jsx(c,{span:12,style:{width:"100%",display:"flex",justifyContent:"center"},children:e.jsxs(l,{direction:"vertical",size:"small",children:[e.jsx(f,{style:{width:"100%"},children:e.jsx(c,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx(d,{src:X,preview:!1,style:{width:465,height:142,display:"flex"}})})}),e.jsx(f,{style:{width:"100%"},children:e.jsxs(c,{span:24,style:{display:"flex",justifyContent:"center",position:"relative"},children:[e.jsxs("p",{style:{fontSize:50,fontFamily:"Arimo Hebrew Subset",fontWeight:"bold",color:"#fcdc36",textAlign:"center"},children:[a.TotalAmount," ",a.tokenSymbol]}),e.jsx("label",{style:{position:"absolute",fontFamily:"Poppins",fontWeight:400,fontSize:26,color:"white",top:60},children:a.totalAmountUSD})]})}),e.jsx(f,{style:{width:"100%"},children:e.jsx(c,{span:24,style:{display:"flex",justifyContent:"center"},children:e.jsx("p",{style:{fontFamily:"Arimo Hebrew Subset",fontSize:70,fontWeight:"bold",width:s<=900?670:970,height:160,background:"linear-gradient(270deg, #C879F9 0%, #6C7EFC 50%, #74F0B2 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textAlign:"left",marginTop:s<=900?0:30,marginLeft:20},children:"Congratulations the winners!"})})})]})}),e.jsx(c,{span:12,style:{width:"100%",position:"relative",display:"flex",justifyContent:"center",transform:`scale(${s<=900?.8:1})`},children:e.jsxs("div",{style:{width:669,height:500,marginTop:-100,zIndex:-1},children:[e.jsx(d,{src:N,preview:!1,style:{position:"absolute",width:681,top:100,left:100,transform:"scale(0.83)"}}),e.jsx(d,{src:P,preview:!1,style:{width:554,position:"absolute",top:100,left:150}}),e.jsx(d,{src:B,style:{position:"absolute",width:485.5,top:130,left:200,cursor:"pointer"}})]})})]}),e.jsxs(l,{direction:"vertical",style:{display:"flex",justifyContent:"center",alignContent:"center",height:50,marginTop:s<=900?-66:100,position:"relative",transform:`scale(${s<=900?.8:1})`},children:[e.jsxs(l,{style:{width:"100%",display:"flex",justifyContent:"center",paddingLeft:80},children:[e.jsxs("div",{children:[e.jsx("label",{style:{fontFamily:"Arimo Hebrew Subset",fontSize:20,color:"#91a7be",display:"flex",justifyContent:"center",marginBottom:10},children:"Begin crafting your own miracles!"}),e.jsx(g,{onClick:F,className:"start-btn",style:{width:460,height:100,borderRadius:40,fontSize:40,fontWeight:700},children:a.isWaitingVerify&&!w?"Verify and Earn":"Create game"})]}),e.jsx(Q,{rootClassName:"rule-popover",content:a.isWaitingVerify&&!w?D:O,title:"Rules",placement:"right",children:e.jsx(g,{style:{width:42,height:42,background:"transparent",border:"none",marginLeft:35,marginTop:26},icon:e.jsx(d,{src:Z,preview:!1,style:{width:42,height:42}}),type:"default"})})]}),e.jsx(l,{direction:"horizontal",size:"small",hidden:!h,style:{display:"flex",justifyContent:"center"},children:e.jsxs(g,{type:"text",style:{display:"flex"},target:"_blank",href:`${U(m.instance.chainId)}/tx/${h}`,disabled:!h,children:[e.jsxs("p",{style:{color:"#91a7be",fontSize:30,fontFamily:"Arimo Hebrew Subset",fontWeight:"bold"},children:["TX: ",$(h)]}),e.jsx("svg",{style:{marginTop:2,marginLeft:30,color:"#91a7be",fontSize:40,display:"none"},stroke:"currentColor",fill:"none",strokeWidth:"0",viewBox:"0 0 24 24",focusable:"false",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})})]})]})})}export{de as default};
