import{u as I,l as W,m as z,n as i,G as A,o as n,p as w,q as j,s as t,S as a,C as F,R as N,t as b,B as m,v as R,w as l,x as V,I as h,y as B,z as M,A as C,D,F as v,H as P}from"./index-729967d5.js";import{T as _}from"./ticket_nft-6fc753da.js";import{I as O}from"./information-b6116945.js";import{N as U}from"./nft_bottom-1b63c0d9.js";import{L as $}from"./LotteryCreateModal-a631e369.js";import{c as S,s as q}from"./Loading-9878eb68.js";import{P as J}from"./index-6004d27a.js";import"./index-d0f81698.js";import"./useLocale-f56572ee.js";import"./index-ed98480d.js";import"./TextArea-f3a5aefb.js";import"./SearchOutlined-a7015ff2.js";function ct(){const d=I(),T=W(),L=z($),[o,f]=i.useState(new A),[g,H]=i.useState(!0),[k]=i.useState(window.innerHeight),[r,y]=i.useState(null),p=async()=>{n.instance.emit(C.event)},u=async(s,x,e)=>{const c=d.id;if(s!==c)return Promise.resolve();await l.instance.getAddress()===e&&(S(),D("Verify success")),n.instance.emit(C.event)};async function E(){const s=d.id,e=await(await l.instance.getContract(v.LotteryGameSystem)).getGame(s);f(e),e.transactionHash===""?e.getTransactionHash().then(c=>{y(c)}):y(e.transactionHash),H(!e.isWaitingReward)}i.useEffect(()=>(n.instance.on(w.event,u),n.instance.on(j.event,p),E(),()=>{n.instance.off(w.event,u),n.instance.off(j.event,p)}),[T.pathname]);const G=async()=>{const s=d.id,e=await(await l.instance.getContract(v.LotteryGameSystem)).getGame(s,!0);if(f(e),e.isWaitingVerify){q();try{await e.verify()}catch{S(),P("Verify failed")}}else L.show()};return t.jsx(t.Fragment,{children:t.jsxs(a,{direction:"vertical",style:{minHeight:`${F}`,width:"100%",display:"flex",justifyContent:"center"},children:[t.jsxs(N,{gutter:0,children:[t.jsx(b,{span:12,style:{width:"100%",paddingLeft:65},children:t.jsxs(a,{direction:"vertical",size:"small",children:[t.jsx("p",{style:{fontFamily:"Arimo Hebrew Subset",fontSize:70,fontWeight:700,width:970,height:160,background:"linear-gradient(270deg, #C879F9 0%, #6C7EFC 50%, #74F0B2 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textAlign:"left",marginTop:30},children:"Congratulations the winners!"}),t.jsxs("p",{style:{fontSize:70,fontFamily:"Arimo Hebrew Subset",fontWeight:"bold",color:"white",width:1e3,textAlign:"left"},children:["Recent Jackpot:"," ",t.jsxs("span",{style:{color:"#fcdc36",fontFamily:"Arimo Hebrew Subset",fontSize:70,fontWeight:"bold",letterSpacing:0,textAlign:"left"},children:[o.TotalAmount," ",o.tokenSymbol]})]}),t.jsx(a,{direction:"horizontal",size:"small",hidden:!r,style:{marginTop:-50},children:t.jsxs(m,{type:"text",style:{display:"flex"},target:"_blank",href:`${R(l.instance.chainId)}/tx/${r}`,disabled:!r,children:[t.jsxs("p",{style:{color:"#91a7be",fontSize:30,fontFamily:"Arimo Hebrew Subset",fontWeight:700,marginLeft:-10},children:["TX: ",V(r)]}),t.jsx("svg",{style:{marginTop:2,marginLeft:30,color:"#91a7be",fontSize:40,display:"none"},stroke:"currentColor",fill:"none",strokeWidth:"0",viewBox:"0 0 24 24",focusable:"false",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})})]})}),t.jsx(b,{span:12,style:{width:"100%",position:"relative",display:"flex",justifyContent:"center"},children:t.jsxs("div",{style:{width:669,height:500,marginTop:-100,zIndex:-1},children:[t.jsx(h,{src:U,preview:!1,style:{position:"absolute",width:669}}),t.jsx(h,{src:_,style:{position:"absolute",width:375,transform:"rotate(-11.204deg)",top:130,left:200,cursor:"pointer"}})]})})]}),t.jsx(a,{direction:"vertical",style:{display:"flex",justifyContent:"center",alignContent:"center",height:50,marginTop:k<900?20:100,position:"relative"},children:t.jsxs(a,{style:{width:"100%",display:"flex",justifyContent:"center",marginTop:50},children:[t.jsxs("div",{children:[t.jsx("label",{style:{fontFamily:"Arimo Hebrew Subset",fontSize:20,color:"#91a7be",display:"flex",justifyContent:"center",marginBottom:10},children:"Begin crafting your own miracles!"}),t.jsx(m,{onClick:G,className:"start-btn",style:{width:460,height:100,borderRadius:40,fontSize:40,fontWeight:700},children:o.isWaitingVerify&&!g?"Verify and Earn":"Create game"})]}),t.jsx(J,{content:o.isWaitingVerify&&!g?B:M,title:"Rules",placement:"right",children:t.jsx(m,{style:{width:42,height:42,background:"transparent",border:"none",marginLeft:35},icon:t.jsx(h,{src:O,preview:!1,style:{width:42,height:42}}),type:"default"})})]})})]})})}export{ct as default};
